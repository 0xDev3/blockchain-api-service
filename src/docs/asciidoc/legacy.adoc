= Legacy (deprecated) API
Below is the list of API endpoints that have been deprecated and will be removed in the future.

== ERC20 Balance Checking API
All endpoints are public and do not require `Authorization: Bearer JWT` header.

=== Create ERC20 Balance Check Request
Creates ERC20 balance request with specified parameters. Either `client_id` or `chain_id`, `redirect_url` and
`token_address` must be provided as request body parameters. `block_number`, `wallet_address`, `arbitrary_data`,
`screen_config` and all its child fields are optional. `arbitrary_data` field can contain any desired JSON value.
Balance check request ID can be interpolated into the `redirect_url` by placing `${id}` placeholder in the place where
request ID is desired in the URL. The placeholder must strictly have dollar sign and brackets to be interpolated,
and only `id` field can be interpolated.

Example request using `client_id` field:

.Request
include::{snippets}/Erc20BalanceRequestControllerApiTest/mustCorrectlyCreateErc20BalanceRequestViaClientId/http-request.adoc[]
.Response
include::{snippets}/Erc20BalanceRequestControllerApiTest/mustCorrectlyCreateErc20BalanceRequestViaClientId/http-response.adoc[]

Example request using `chain_id`, `redirect_url` and `token_address` fields:

.Request
include::{snippets}/Erc20BalanceRequestControllerApiTest/mustCorrectlyCreateErc20BalanceRequestViaChainIdRedirectUrlAndTokenAddress/http-request.adoc[]
.Response
include::{snippets}/Erc20BalanceRequestControllerApiTest/mustCorrectlyCreateErc20BalanceRequestViaChainIdRedirectUrlAndTokenAddress/http-response.adoc[]

=== Fetch ERC20 Balance Check Request by ID
Fetches stored ERC20 balance check request with its current status. Possible statuses are `PENDING`, `SUCCESS` and
`FAILED`. The request is considered successful if the attached signed message is valid and was signed by
`wallet_address`. If `wallet_address` was not specified when the request was created, then any valid signature will be
accepted. For successful requests, `balance` field will contain info about requested ERC20 balance. For pending
requests, `balance` and `signed_message` fields will always be `null`. If the signed message is invalid or does not
match specified `wallet_address`, request will be considered as failed. If `block_number` was specified during request
creation, then ERC20 balance will be fetched only for that block number, and if `block_number` was not specified then
the latest ERC20 balance will be fetched every time this resource is requested.

Custom RPC URL can be specified via optional `X-RPC-URL` header - this will NOT override the default RPC URL for the
specified chain ID, it only allows you to specify RPC URL for non-natively supported chains. To override the default RPC
URL, use `X-RPC-URL-OVERRIDE` header.

.Request
include::{snippets}/Erc20BalanceRequestControllerApiTest/mustCorrectlyFetchErc20BalanceRequest/http-request.adoc[]
.Response
include::{snippets}/Erc20BalanceRequestControllerApiTest/mustCorrectlyFetchErc20BalanceRequest/http-response.adoc[]

=== Attach WalletAddress and Signed Message to ERC20 Balance Check Request
Attaches wallet address and signed message to existing ERC20 balance check request. Once the wallet address and signed
message are attached to the request, any subsequent attempts to attach a new values will fail.

.Request
include::{snippets}/Erc20BalanceRequestControllerApiTest/mustCorrectlyAttachSignedMessage/http-request.adoc[]
.Response
include::{snippets}/Erc20BalanceRequestControllerApiTest/mustCorrectlyAttachSignedMessage/http-response.adoc[]

== ERC20 Send Request API
All endpoints are public and do not require `Authorization: Bearer JWT` header.

=== Create ERC20 Send Request
Creates ERC20 send request with specified parameters. Either `client_id` or `chain_id`, `redirect_url` and
`token_address` must be provided as request body parameters. `sender_address`, `arbitrary_data`, `screen_config` and all
its child fields are optional. `arbitrary_data` field can contain any desired JSON value. Send request ID can be
interpolated into the `redirect_url` by placing `${id}` placeholder in the place where request ID is desired in the URL.
The placeholder must strictly have dollar sign and brackets to be interpolated, and only `id` field can be interpolated.

Example request using `client_id` field:

.Request
include::{snippets}/Erc20SendRequestControllerApiTest/mustCorrectlyCreateErc20SendRequestViaClientId/http-request.adoc[]
.Response
include::{snippets}/Erc20SendRequestControllerApiTest/mustCorrectlyCreateErc20SendRequestViaClientId/http-response.adoc[]

Example request using `chain_id`, `redirect_url` and `token_address` fields:

.Request
include::{snippets}/Erc20SendRequestControllerApiTest/mustCorrectlyCreateErc20SendRequestViaChainIdRedirectUrlAndTokenAddress/http-request.adoc[]
.Response
include::{snippets}/Erc20SendRequestControllerApiTest/mustCorrectlyCreateErc20SendRequestViaChainIdRedirectUrlAndTokenAddress/http-response.adoc[]

=== Fetch ERC20 Send Request by ID
Fetches stored ERC20 send request with its current status. Possible statuses are `PENDING`, `SUCCESS` and `FAILED`. The
request is considered successful if the attached transaction is confirmed on blockchain and all its data matches
specified request parameters (correct `to` and `from` addresses, `amount`, matching `data` and `txHash`). If there are
any mismatches between specified request data and state on blockchain, the request will be marked as failed. If there is
no attached transaction hash or if transaction for attached hash is not yet mined on blockchain, request will be in
pending state.

Custom RPC URL can be specified via optional `X-RPC-URL` header - this will NOT override the default RPC URL for the
specified chain ID, it only allows you to specify RPC URL for non-natively supported chains. To override the default RPC
URL, use `X-RPC-URL-OVERRIDE` header.

.Request
include::{snippets}/Erc20SendRequestControllerApiTest/mustCorrectlyFetchErc20SendRequest/http-request.adoc[]
.Response
include::{snippets}/Erc20SendRequestControllerApiTest/mustCorrectlyFetchErc20SendRequest/http-response.adoc[]

=== Attach Transaction Hash to ERC20 Send Request
Attaches transaction hash to existing ERC20 send request. Once the transaction hash is attached to the request, any
subsequent attempts to attach a new transaction hash will fail.

.Request
include::{snippets}/Erc20SendRequestControllerApiTest/mustCorrectlyAttachTransactionHash/http-request.adoc[]
.Response
include::{snippets}/Erc20SendRequestControllerApiTest/mustCorrectlyAttachTransactionHash/http-response.adoc[]
